<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Probability Manager.js</title>
    <script src="/core/Probability-Manager.js"></script>
</head>
<body style="display: flex; flex-direction: column; background: #2b2b2b;">
    <textarea name="Editor" id="Editor" oninput="Run()" rows="17" autocomplete="off" style="resize: vertical;" spellcheck="false"></textarea>
    <textarea name="Output" id="Out" rows="7" disabled style="resize: none;"></textarea>
    <button hidden style="width: fit-content; background: palegreen; border: solid 3px; border-color: forestgreen; font-weight: bold; font-family: sans-serif;">Run</button>
</body>
</html>

<script>
    // Correggere il fetch e ottenere il contenuto del file senza commenti sourceMappingURL
    fetch('/core/example.js')
        .then(response => response.text())
        .then(scriptContent => {
            // Rimuove le righe che iniziano con //# sourceMappingURL=
            scriptContent = scriptContent.replace(/\/\/# sourceMappingURL=.*$/gm, '');
            document.getElementById('Editor').textContent = scriptContent;
        })
        .catch(error => {
            console.error('Error fetching example script:', error);
        });

    // Reindirizzare l'output console
    (function() {
        var oldLog = console.log;
        console.log = function(message) {
            document.getElementById('Out').value += message + '\n';
            oldLog.apply(console, arguments);
        };
    })();

    function Run() {
        const editorContent = document.getElementById('Editor').value;
        try {
            document.getElementById('Out').value = ''; // Pulisce l'output
            eval(editorContent);
        } catch (error) {
            document.getElementById('Out').value = 'Error: ' + error.message;
        }
    }
</script>